{"remainingRequest":"G:\\x\\vuetify_school\\vuetify_school\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\x\\vuetify_school\\vuetify_school\\src\\views\\Sign.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\x\\vuetify_school\\vuetify_school\\src\\views\\Sign.vue","mtime":1630748828868},{"path":"G:\\x\\vuetify_school\\vuetify_school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630738175354},{"path":"G:\\x\\vuetify_school\\vuetify_school\\node_modules\\babel-loader\\lib\\index.js","mtime":1630738175211},{"path":"G:\\x\\vuetify_school\\vuetify_school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630738175354},{"path":"G:\\x\\vuetify_school\\vuetify_school\\node_modules\\vue-loader\\lib\\index.js","mtime":1630738179363}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge3JlcXVlc3R9IGZyb20gIi4uL25ldHdvcmsvcmVxdWVzdCI7DQppbXBvcnQgVnVlQ29va2llcyBmcm9tICd2dWUtY29va2llcycNCmltcG9ydCB7Z2V0QWRtaW5JbmZvLCBnZXRJbWFnZX0gZnJvbSAiLi4vbmV0d29yay9hZG1pbkFwaSI7DQppbXBvcnQgJHN0b3JlIGZyb20gJy4uL3N0b3JlJw0KaW1wb3J0IHtpZnRoZW59IGZyb20gIi4uL25ldHdvcmsvRk4iOw0KaW1wb3J0IGZhaWxEaWFsb2dzIGZyb20gIi4uL2NvbXBvbmVudHMvSG9tZUl0ZW0vZmFpbERpYWxvZ3MiOw0KDQoNCmV4cG9ydCBkZWZhdWx0IHsNCm5hbWU6ICJTaWduIiwNCiAgZGF0YSgpew0KICAgIHJldHVybnsNCiAgICAgIHBhczogVnVlQ29va2llcy5nZXQoJ3Bhc3N3b3JkJyk/IFZ1ZUNvb2tpZXMuZ2V0KCdwYXNzd29yZCcpOicxMjM0NTYnLA0KICAgICAgbmFtZXM6ICBWdWVDb29raWVzLmdldCgndXNlcm5hbWUnKT9WdWVDb29raWVzLmdldCgndXNlcm5hbWUnKToncm9vdCcsDQogICAgICAvLyBwYXNzd29yZDogVnVlQ29va2llcy5nZXQoJ3Bhc3N3b3JkJyksDQogICAgICAvLyB1c2VybmFtZTpWdWVDb29raWVzLmdldCgndXNlcm5hbWUnKSwNCiAgICAgIGlzVXBkYXRpbmc6IGZhbHNlLA0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCg0KICAgIGlmKHRoaXMuJHN0b3JlLnN0YXRlLlNpbmcgJiYgdGhpcy5uYW1lcyAmJiB0aGlzLnBhcyl7DQogICAgICBzZXRUaW1lb3V0KCgpPT57DQogICAgICAgIHRoaXMuc3VibWl0KCkNCiAgICAgIH0sMTAwMCkNCiAgfQ0KDQogIH0sDQogIGNvbXBvbmVudHM6ew0KICAgIGZhaWxEaWFsb2dzDQogIH0sDQogIG1ldGhvZHM6ew0KICBzdWJtaXQoKXsNCiAgICB0aGlzLiRyZWZzLmZhaWxEaWFsb2dzLmRpYWxvZz10cnVlOw0KICAgIHRoaXMuJHJlZnMuZmFpbERpYWxvZ3MudGV4dD0n55m75b2V5aSx6LSl77yM6K+35qOA5p+l55So5oi35ZCN5a+G56CB5oiW5qOA5p+l572R57uc6L+e5o6lJw0KICAgIHRoaXMuaXNVcGRhdGluZz10cnVlDQogICAgcmVxdWVzdCh7DQogICAgICB1cmw6Jy9hZG1pbi9sb2dpbicsDQogICAgICBtZXRob2Q6J3Bvc3QnLA0KICAgICAgZGF0YTp7DQogICAgICAgICJwYXNzd29yZCI6IHRoaXMucGFzLA0KICAgICAgICAidXNlcm5hbWUiOiB0aGlzLm5hbWVzDQogICAgICAgIC8vICJwYXNzd29yZCI6ICcxMjM0NTYnLA0KICAgICAgICAvLyAidXNlcm5hbWUiOiAnYWRtaW4nDQogICAgICB9LA0KDQogICAgIC8vDQogICAgfSkNCiAgICAgLnRoZW4ocmVzPT57DQogICAgICAgIGlmKHJlcy5jb2RlPT09NTAwKXsNCiAgICAgICAgICB0aGlzLmlzVXBkYXRpbmc9ZmFsc2UNCiAgICAgICAgICBhbGVydCgn55m75b2V5aSx6LSl77yM6K+35qOA5p+l55So5oi35ZCN5a+G56CB5oiW5qOA5p+l572R57uc6L+e5o6lJykNCg0KICAgICAgICB9DQogICAgICAgaWYoaWZ0aGVuKHJlcykpIHsNCiAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0VG9rZW4iLCByZXMuZGF0YS50b2tlbikNCiAgICAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS50b2tlbikgew0KICAgICAgICAgICBhbGVydCgn55m75b2V5oiQ5YqfJykNCiAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cERhdGFTaW5nJykNCiAgICAgICAgICAgVnVlQ29va2llcy5zZXQoJ3VzZXJuYW1lJywgdGhpcy5uYW1lcyx7ZXhwaXJlczogN30pDQogICAgICAgICAgIFZ1ZUNvb2tpZXMuc2V0KCdwYXNzd29yZCcsIHRoaXMucGFzLHtleHBpcmVzOiA3fSkNCiAgICAgICAgICAgLy8gZ2V0SW1hZ2UodGhpcy5uYW1lcykNCiAgICAgICAgICAgLy8gICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgLy8gICAgICAgICAkc3RvcmUuY29tbWl0KCd1cERhdGVBZG1pbkltYWdlJywgcmVzLmRhdGEpDQogICAgICAgICAgIC8vICAgICAgICAgJHN0b3JlLmNvbW1pdCgndXBEYXRlQWRtaW5Vc2VyTmFtZScsIHRoaXMubmFtZXMpDQogICAgICAgICAgIC8vICAgICAgICAgfQ0KICAgICAgICAgICAvLyAgICAgKS5jYXRjaCgpDQogICAgICAgICAgICAgZ2V0QWRtaW5JbmZvKCkNCiAgICAgICAgICAgICAgICAgLnRoZW4ocmVzPT57DQogICAgICAgICAgICAgICAgICAgaWYoaWZ0aGVuKHJlcykpIHsNCiAgICAgICAgICAgICAgICAgICAgICRzdG9yZS5jb21taXQoJ3VwRGF0ZUFkbWluSW5mbycsIHJlcy5kYXRhKQ0KICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9jb2xsZWdlJykNCiAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgLmNhdGNoKCgpPT57DQogICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5mYWlsRGlhbG9ncy5kaWFsb2c9dHJ1ZTt0aGlzLiRyZWZzLmZhaWxEaWFsb2dzLnRleHQ9J+iOt+WPluS4quS6uuS/oeaBr+Wksei0peivt+WIt+aWsOmhtemdoicNCg0KICAgICAgICAgICAgICAgICB9KQ0KDQoNCiAgICAgICAgIH0NCiAgICAgICB9DQogICAgICB9KQ0KICAgICAgLmNhdGNoKCgpPT57DQoNCiAgICAgICAgdGhpcy5pc1VwZGF0aW5nPWZhbHNlDQogICAgICAgIGFsZXJ0KCfnmbvlvZXlpLHotKXvvIzor7fmo4Dmn6XnvZHnu5zov57mjqUnKQ0KDQogICAgICB9KQ0KDQoNCg0KICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["Sign.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;AAIA;AACA;AACA","file":"Sign.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <v-card\r\n      color=\"blue-grey darken-1\"\r\n      dark\r\n      :loading=\"isUpdating\"\r\n      width=\"400\"\r\n      id=\"card\"\r\n  >\r\n    <template v-slot:progress>\r\n      <v-progress-linear\r\n          absolute\r\n          color=\"green lighten-3\"\r\n          height=\"4\"\r\n          indeterminate\r\n      ></v-progress-linear>\r\n    </template>\r\n    <v-img\r\n        height=\"300\"\r\n        src=\"../assets/dark-beach.jpg\"\r\n    >\r\n\r\n    </v-img>\r\n    <v-form>\r\n      <v-container id=\"text\">\r\n        <div style=\"width: 280px\">\r\n\r\n            <v-text-field\r\n                v-model=\"names\"\r\n                :disabled=\"isUpdating\"\r\n                class=\"text\"\r\n                filled\r\n                color=\"blue-grey lighten-2\"\r\n                label=\"用户名\"\r\n                @keyup.enter=\"submit()\"\r\n            ></v-text-field>\r\n        </div>\r\n        <div style=\"width: 280px\">\r\n\r\n            <v-text-field\r\n                v-model=\"pas\"\r\n                :disabled=\"isUpdating\"\r\n                filled\r\n                class=\"text\"\r\n                type=\"password\"\r\n                color=\"blue-grey lighten-2\"\r\n                label=\"密码\"\r\n                @keyup.enter=\"submit()\"\r\n            ></v-text-field>\r\n        </div>\r\n      </v-container>\r\n    </v-form>\r\n    <v-divider></v-divider>\r\n    <v-card-actions>\r\n\r\n      <v-spacer></v-spacer>\r\n      <v-btn\r\n          :loading=\"isUpdating\"\r\n          color=\"blue-grey darken-3\"\r\n          depressed\r\n          @click=\"submit()\"\r\n\r\n      >\r\n        <v-icon left>\r\n          mdi-update\r\n        </v-icon>\r\n        登录\r\n      </v-btn>\r\n    </v-card-actions>\r\n    <failDialogs  ref=\"failDialogs\"></failDialogs>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport {request} from \"../network/request\";\r\nimport VueCookies from 'vue-cookies'\r\nimport {getAdminInfo, getImage} from \"../network/adminApi\";\r\nimport $store from '../store'\r\nimport {ifthen} from \"../network/FN\";\r\nimport failDialogs from \"../components/HomeItem/failDialogs\";\r\n\r\n\r\nexport default {\r\nname: \"Sign\",\r\n  data(){\r\n    return{\r\n      pas: VueCookies.get('password')? VueCookies.get('password'):'123456',\r\n      names:  VueCookies.get('username')?VueCookies.get('username'):'root',\r\n      // password: VueCookies.get('password'),\r\n      // username:VueCookies.get('username'),\r\n      isUpdating: false,\r\n    }\r\n  },\r\n  mounted() {\r\n\r\n    if(this.$store.state.Sing && this.names && this.pas){\r\n      setTimeout(()=>{\r\n        this.submit()\r\n      },1000)\r\n  }\r\n\r\n  },\r\n  components:{\r\n    failDialogs\r\n  },\r\n  methods:{\r\n  submit(){\r\n    this.$refs.failDialogs.dialog=true;\r\n    this.$refs.failDialogs.text='登录失败，请检查用户名密码或检查网络连接'\r\n    this.isUpdating=true\r\n    request({\r\n      url:'/admin/login',\r\n      method:'post',\r\n      data:{\r\n        \"password\": this.pas,\r\n        \"username\": this.names\r\n        // \"password\": '123456',\r\n        // \"username\": 'admin'\r\n      },\r\n\r\n     //\r\n    })\r\n     .then(res=>{\r\n        if(res.code===500){\r\n          this.isUpdating=false\r\n          alert('登录失败，请检查用户名密码或检查网络连接')\r\n\r\n        }\r\n       if(ifthen(res)) {\r\n         this.$store.commit(\"setToken\", res.data.token)\r\n         if (this.$store.state.token) {\r\n           alert('登录成功')\r\n           this.$store.commit('upDataSing')\r\n           VueCookies.set('username', this.names,{expires: 7})\r\n           VueCookies.set('password', this.pas,{expires: 7})\r\n           // getImage(this.names)\r\n           //     .then((res) => {\r\n           //         $store.commit('upDateAdminImage', res.data)\r\n           //         $store.commit('upDateAdminUserName', this.names)\r\n           //         }\r\n           //     ).catch()\r\n             getAdminInfo()\r\n                 .then(res=>{\r\n                   if(ifthen(res)) {\r\n                     $store.commit('upDateAdminInfo', res.data)\r\n                     this.$router.push('/college')\r\n                   }\r\n\r\n                 })\r\n                 .catch(()=>{\r\n                   this.$refs.failDialogs.dialog=true;this.$refs.failDialogs.text='获取个人信息失败请刷新页面'\r\n\r\n                 })\r\n\r\n\r\n         }\r\n       }\r\n      })\r\n      .catch(()=>{\r\n\r\n        this.isUpdating=false\r\n        alert('登录失败，请检查网络连接')\r\n\r\n      })\r\n\r\n\r\n\r\n  }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#card{\r\n  top: 100px;\r\n  margin: auto;\r\n  box-shadow: #c8c9cc 10px 10px 5px;\r\n}\r\n#text{\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n\r\n}\r\n\r\n</style>"]}]}