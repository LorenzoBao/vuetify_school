{"remainingRequest":"G:\\x\\vuetify_school\\vuetify_school\\node_modules\\babel-loader\\lib\\index.js!G:\\x\\vuetify_school\\vuetify_school\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\x\\vuetify_school\\vuetify_school\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\x\\vuetify_school\\vuetify_school\\src\\views\\Sign.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\x\\vuetify_school\\vuetify_school\\src\\views\\Sign.vue","mtime":1630748828868},{"path":"G:\\x\\vuetify_school\\vuetify_school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630738175354},{"path":"G:\\x\\vuetify_school\\vuetify_school\\node_modules\\babel-loader\\lib\\index.js","mtime":1630738175211},{"path":"G:\\x\\vuetify_school\\vuetify_school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630738175354},{"path":"G:\\x\\vuetify_school\\vuetify_school\\node_modules\\vue-loader\\lib\\index.js","mtime":1630738179363}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgcmVxdWVzdCB9IGZyb20gIi4uL25ldHdvcmsvcmVxdWVzdCI7CmltcG9ydCBWdWVDb29raWVzIGZyb20gJ3Z1ZS1jb29raWVzJzsKaW1wb3J0IHsgZ2V0QWRtaW5JbmZvLCBnZXRJbWFnZSB9IGZyb20gIi4uL25ldHdvcmsvYWRtaW5BcGkiOwppbXBvcnQgJHN0b3JlIGZyb20gJy4uL3N0b3JlJzsKaW1wb3J0IHsgaWZ0aGVuIH0gZnJvbSAiLi4vbmV0d29yay9GTiI7CmltcG9ydCBmYWlsRGlhbG9ncyBmcm9tICIuLi9jb21wb25lbnRzL0hvbWVJdGVtL2ZhaWxEaWFsb2dzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTaWduIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGFzOiBWdWVDb29raWVzLmdldCgncGFzc3dvcmQnKSA/IFZ1ZUNvb2tpZXMuZ2V0KCdwYXNzd29yZCcpIDogJzEyMzQ1NicsCiAgICAgIG5hbWVzOiBWdWVDb29raWVzLmdldCgndXNlcm5hbWUnKSA/IFZ1ZUNvb2tpZXMuZ2V0KCd1c2VybmFtZScpIDogJ3Jvb3QnLAogICAgICAvLyBwYXNzd29yZDogVnVlQ29va2llcy5nZXQoJ3Bhc3N3b3JkJyksCiAgICAgIC8vIHVzZXJuYW1lOlZ1ZUNvb2tpZXMuZ2V0KCd1c2VybmFtZScpLAogICAgICBpc1VwZGF0aW5nOiBmYWxzZQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5TaW5nICYmIHRoaXMubmFtZXMgJiYgdGhpcy5wYXMpIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuc3VibWl0KCk7CiAgICAgIH0sIDEwMDApOwogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgZmFpbERpYWxvZ3M6IGZhaWxEaWFsb2dzCiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzLmZhaWxEaWFsb2dzLmRpYWxvZyA9IHRydWU7CiAgICAgIHRoaXMuJHJlZnMuZmFpbERpYWxvZ3MudGV4dCA9ICfnmbvlvZXlpLHotKXvvIzor7fmo4Dmn6XnlKjmiLflkI3lr4bnoIHmiJbmo4Dmn6XnvZHnu5zov57mjqUnOwogICAgICB0aGlzLmlzVXBkYXRpbmcgPSB0cnVlOwogICAgICByZXF1ZXN0KHsKICAgICAgICB1cmw6ICcvYWRtaW4vbG9naW4nLAogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgICJwYXNzd29yZCI6IHRoaXMucGFzLAogICAgICAgICAgInVzZXJuYW1lIjogdGhpcy5uYW1lcyAvLyAicGFzc3dvcmQiOiAnMTIzNDU2JywKICAgICAgICAgIC8vICJ1c2VybmFtZSI6ICdhZG1pbicKCiAgICAgICAgfSAvLwoKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSA1MDApIHsKICAgICAgICAgIF90aGlzMi5pc1VwZGF0aW5nID0gZmFsc2U7CiAgICAgICAgICBhbGVydCgn55m75b2V5aSx6LSl77yM6K+35qOA5p+l55So5oi35ZCN5a+G56CB5oiW5qOA5p+l572R57uc6L+e5o6lJyk7CiAgICAgICAgfQoKICAgICAgICBpZiAoaWZ0aGVuKHJlcykpIHsKICAgICAgICAgIF90aGlzMi4kc3RvcmUuY29tbWl0KCJzZXRUb2tlbiIsIHJlcy5kYXRhLnRva2VuKTsKCiAgICAgICAgICBpZiAoX3RoaXMyLiRzdG9yZS5zdGF0ZS50b2tlbikgewogICAgICAgICAgICBhbGVydCgn55m75b2V5oiQ5YqfJyk7CgogICAgICAgICAgICBfdGhpczIuJHN0b3JlLmNvbW1pdCgndXBEYXRhU2luZycpOwoKICAgICAgICAgICAgVnVlQ29va2llcy5zZXQoJ3VzZXJuYW1lJywgX3RoaXMyLm5hbWVzLCB7CiAgICAgICAgICAgICAgZXhwaXJlczogNwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgVnVlQ29va2llcy5zZXQoJ3Bhc3N3b3JkJywgX3RoaXMyLnBhcywgewogICAgICAgICAgICAgIGV4cGlyZXM6IDcKICAgICAgICAgICAgfSk7IC8vIGdldEltYWdlKHRoaXMubmFtZXMpCiAgICAgICAgICAgIC8vICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIC8vICAgICAgICAgJHN0b3JlLmNvbW1pdCgndXBEYXRlQWRtaW5JbWFnZScsIHJlcy5kYXRhKQogICAgICAgICAgICAvLyAgICAgICAgICRzdG9yZS5jb21taXQoJ3VwRGF0ZUFkbWluVXNlck5hbWUnLCB0aGlzLm5hbWVzKQogICAgICAgICAgICAvLyAgICAgICAgIH0KICAgICAgICAgICAgLy8gICAgICkuY2F0Y2goKQoKICAgICAgICAgICAgZ2V0QWRtaW5JbmZvKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgaWYgKGlmdGhlbihyZXMpKSB7CiAgICAgICAgICAgICAgICAkc3RvcmUuY29tbWl0KCd1cERhdGVBZG1pbkluZm8nLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCgnL2NvbGxlZ2UnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBfdGhpczIuJHJlZnMuZmFpbERpYWxvZ3MuZGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICBfdGhpczIuJHJlZnMuZmFpbERpYWxvZ3MudGV4dCA9ICfojrflj5bkuKrkurrkv6Hmga/lpLHotKXor7fliLfmlrDpobXpnaInOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuaXNVcGRhdGluZyA9IGZhbHNlOwogICAgICAgIGFsZXJ0KCfnmbvlvZXlpLHotKXvvIzor7fmo4Dmn6XnvZHnu5zov57mjqUnKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Sign.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <v-card\r\n      color=\"blue-grey darken-1\"\r\n      dark\r\n      :loading=\"isUpdating\"\r\n      width=\"400\"\r\n      id=\"card\"\r\n  >\r\n    <template v-slot:progress>\r\n      <v-progress-linear\r\n          absolute\r\n          color=\"green lighten-3\"\r\n          height=\"4\"\r\n          indeterminate\r\n      ></v-progress-linear>\r\n    </template>\r\n    <v-img\r\n        height=\"300\"\r\n        src=\"../assets/dark-beach.jpg\"\r\n    >\r\n\r\n    </v-img>\r\n    <v-form>\r\n      <v-container id=\"text\">\r\n        <div style=\"width: 280px\">\r\n\r\n            <v-text-field\r\n                v-model=\"names\"\r\n                :disabled=\"isUpdating\"\r\n                class=\"text\"\r\n                filled\r\n                color=\"blue-grey lighten-2\"\r\n                label=\"用户名\"\r\n                @keyup.enter=\"submit()\"\r\n            ></v-text-field>\r\n        </div>\r\n        <div style=\"width: 280px\">\r\n\r\n            <v-text-field\r\n                v-model=\"pas\"\r\n                :disabled=\"isUpdating\"\r\n                filled\r\n                class=\"text\"\r\n                type=\"password\"\r\n                color=\"blue-grey lighten-2\"\r\n                label=\"密码\"\r\n                @keyup.enter=\"submit()\"\r\n            ></v-text-field>\r\n        </div>\r\n      </v-container>\r\n    </v-form>\r\n    <v-divider></v-divider>\r\n    <v-card-actions>\r\n\r\n      <v-spacer></v-spacer>\r\n      <v-btn\r\n          :loading=\"isUpdating\"\r\n          color=\"blue-grey darken-3\"\r\n          depressed\r\n          @click=\"submit()\"\r\n\r\n      >\r\n        <v-icon left>\r\n          mdi-update\r\n        </v-icon>\r\n        登录\r\n      </v-btn>\r\n    </v-card-actions>\r\n    <failDialogs  ref=\"failDialogs\"></failDialogs>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport {request} from \"../network/request\";\r\nimport VueCookies from 'vue-cookies'\r\nimport {getAdminInfo, getImage} from \"../network/adminApi\";\r\nimport $store from '../store'\r\nimport {ifthen} from \"../network/FN\";\r\nimport failDialogs from \"../components/HomeItem/failDialogs\";\r\n\r\n\r\nexport default {\r\nname: \"Sign\",\r\n  data(){\r\n    return{\r\n      pas: VueCookies.get('password')? VueCookies.get('password'):'123456',\r\n      names:  VueCookies.get('username')?VueCookies.get('username'):'root',\r\n      // password: VueCookies.get('password'),\r\n      // username:VueCookies.get('username'),\r\n      isUpdating: false,\r\n    }\r\n  },\r\n  mounted() {\r\n\r\n    if(this.$store.state.Sing && this.names && this.pas){\r\n      setTimeout(()=>{\r\n        this.submit()\r\n      },1000)\r\n  }\r\n\r\n  },\r\n  components:{\r\n    failDialogs\r\n  },\r\n  methods:{\r\n  submit(){\r\n    this.$refs.failDialogs.dialog=true;\r\n    this.$refs.failDialogs.text='登录失败，请检查用户名密码或检查网络连接'\r\n    this.isUpdating=true\r\n    request({\r\n      url:'/admin/login',\r\n      method:'post',\r\n      data:{\r\n        \"password\": this.pas,\r\n        \"username\": this.names\r\n        // \"password\": '123456',\r\n        // \"username\": 'admin'\r\n      },\r\n\r\n     //\r\n    })\r\n     .then(res=>{\r\n        if(res.code===500){\r\n          this.isUpdating=false\r\n          alert('登录失败，请检查用户名密码或检查网络连接')\r\n\r\n        }\r\n       if(ifthen(res)) {\r\n         this.$store.commit(\"setToken\", res.data.token)\r\n         if (this.$store.state.token) {\r\n           alert('登录成功')\r\n           this.$store.commit('upDataSing')\r\n           VueCookies.set('username', this.names,{expires: 7})\r\n           VueCookies.set('password', this.pas,{expires: 7})\r\n           // getImage(this.names)\r\n           //     .then((res) => {\r\n           //         $store.commit('upDateAdminImage', res.data)\r\n           //         $store.commit('upDateAdminUserName', this.names)\r\n           //         }\r\n           //     ).catch()\r\n             getAdminInfo()\r\n                 .then(res=>{\r\n                   if(ifthen(res)) {\r\n                     $store.commit('upDateAdminInfo', res.data)\r\n                     this.$router.push('/college')\r\n                   }\r\n\r\n                 })\r\n                 .catch(()=>{\r\n                   this.$refs.failDialogs.dialog=true;this.$refs.failDialogs.text='获取个人信息失败请刷新页面'\r\n\r\n                 })\r\n\r\n\r\n         }\r\n       }\r\n      })\r\n      .catch(()=>{\r\n\r\n        this.isUpdating=false\r\n        alert('登录失败，请检查网络连接')\r\n\r\n      })\r\n\r\n\r\n\r\n  }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#card{\r\n  top: 100px;\r\n  margin: auto;\r\n  box-shadow: #c8c9cc 10px 10px 5px;\r\n}\r\n#text{\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n\r\n}\r\n\r\n</style>"],"sourceRoot":"src/views"}]}