{"remainingRequest":"G:\\x\\vuetify_school\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\x\\vuetify_school\\src\\views\\Sign.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\x\\vuetify_school\\src\\views\\Sign.vue","mtime":1630738180718},{"path":"G:\\x\\vuetify_school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630738175354},{"path":"G:\\x\\vuetify_school\\node_modules\\babel-loader\\lib\\index.js","mtime":1630738175211},{"path":"G:\\x\\vuetify_school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630738175354},{"path":"G:\\x\\vuetify_school\\node_modules\\vue-loader\\lib\\index.js","mtime":1630738179363}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge3JlcXVlc3R9IGZyb20gIi4uL25ldHdvcmsvcmVxdWVzdCI7DQppbXBvcnQgVnVlQ29va2llcyBmcm9tICd2dWUtY29va2llcycNCmltcG9ydCB7Z2V0QWRtaW5JbmZvLCBnZXRJbWFnZX0gZnJvbSAiLi4vbmV0d29yay9hZG1pbkFwaSI7DQppbXBvcnQgJHN0b3JlIGZyb20gJy4uL3N0b3JlJw0KaW1wb3J0IHtpZnRoZW59IGZyb20gIi4uL25ldHdvcmsvRk4iOw0KaW1wb3J0IGZhaWxEaWFsb2dzIGZyb20gIi4uL2NvbXBvbmVudHMvSG9tZUl0ZW0vZmFpbERpYWxvZ3MiOw0KDQoNCmV4cG9ydCBkZWZhdWx0IHsNCm5hbWU6ICJTaWduIiwNCiAgZGF0YSgpew0KICAgIHJldHVybnsNCiAgICAgIHBhczogVnVlQ29va2llcy5nZXQoJ3Bhc3N3b3JkJyk/IFZ1ZUNvb2tpZXMuZ2V0KCdwYXNzd29yZCcpOicnLA0KICAgICAgbmFtZXM6ICBWdWVDb29raWVzLmdldCgndXNlcm5hbWUnKT9WdWVDb29raWVzLmdldCgndXNlcm5hbWUnKTonJywNCiAgICAgIC8vIHBhc3N3b3JkOiBWdWVDb29raWVzLmdldCgncGFzc3dvcmQnKSwNCiAgICAgIC8vIHVzZXJuYW1lOlZ1ZUNvb2tpZXMuZ2V0KCd1c2VybmFtZScpLA0KICAgICAgaXNVcGRhdGluZzogZmFsc2UsDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KDQogICAgaWYodGhpcy4kc3RvcmUuc3RhdGUuU2luZyAmJiB0aGlzLm5hbWVzICYmIHRoaXMucGFzKXsNCiAgICAgIHNldFRpbWVvdXQoKCk9PnsNCiAgICAgICAgdGhpcy5zdWJtaXQoKQ0KICAgICAgfSwxMDAwKQ0KICB9DQoNCiAgfSwNCiAgY29tcG9uZW50czp7DQogICAgZmFpbERpYWxvZ3MNCiAgfSwNCiAgbWV0aG9kczp7DQogIHN1Ym1pdCgpew0KICAgIHRoaXMuJHJlZnMuZmFpbERpYWxvZ3MuZGlhbG9nPXRydWU7DQogICAgdGhpcy4kcmVmcy5mYWlsRGlhbG9ncy50ZXh0PSfnmbvlvZXlpLHotKXvvIzor7fmo4Dmn6XnlKjmiLflkI3lr4bnoIHmiJbmo4Dmn6XnvZHnu5zov57mjqUnDQogICAgdGhpcy5pc1VwZGF0aW5nPXRydWUNCiAgICByZXF1ZXN0KHsNCiAgICAgIHVybDonL2FkbWluL2xvZ2luJywNCiAgICAgIG1ldGhvZDoncG9zdCcsDQogICAgICBkYXRhOnsNCiAgICAgICAgInBhc3N3b3JkIjogdGhpcy5wYXMsDQogICAgICAgICJ1c2VybmFtZSI6IHRoaXMubmFtZXMNCiAgICAgICAgLy8gInBhc3N3b3JkIjogJzEyMzQ1NicsDQogICAgICAgIC8vICJ1c2VybmFtZSI6ICdhZG1pbicNCiAgICAgIH0sDQoNCiAgICAgLy8NCiAgICB9KQ0KICAgICAudGhlbihyZXM9PnsNCiAgICAgICAgaWYocmVzLmNvZGU9PT01MDApew0KICAgICAgICAgIHRoaXMuaXNVcGRhdGluZz1mYWxzZQ0KICAgICAgICAgIGFsZXJ0KCfnmbvlvZXlpLHotKXvvIzor7fmo4Dmn6XnlKjmiLflkI3lr4bnoIHmiJbmo4Dmn6XnvZHnu5zov57mjqUnKQ0KDQogICAgICAgIH0NCiAgICAgICBpZihpZnRoZW4ocmVzKSkgew0KICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRUb2tlbiIsIHJlcy5kYXRhLnRva2VuKQ0KICAgICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnRva2VuKSB7DQogICAgICAgICAgIGFsZXJ0KCfnmbvlvZXmiJDlip8nKQ0KICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VwRGF0YVNpbmcnKQ0KICAgICAgICAgICBWdWVDb29raWVzLnNldCgndXNlcm5hbWUnLCB0aGlzLm5hbWVzLHtleHBpcmVzOiA3fSkNCiAgICAgICAgICAgVnVlQ29va2llcy5zZXQoJ3Bhc3N3b3JkJywgdGhpcy5wYXMse2V4cGlyZXM6IDd9KQ0KICAgICAgICAgICBnZXRJbWFnZSh0aGlzLm5hbWVzKQ0KICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgICAgICRzdG9yZS5jb21taXQoJ3VwRGF0ZUFkbWluSW1hZ2UnLCByZXMuZGF0YSkNCiAgICAgICAgICAgICAgICAgICAkc3RvcmUuY29tbWl0KCd1cERhdGVBZG1pblVzZXJOYW1lJywgdGhpcy5uYW1lcykNCiAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICApLmNhdGNoKCkNCiAgICAgICAgICAgICBnZXRBZG1pbkluZm8oKQ0KICAgICAgICAgICAgICAgICAudGhlbihyZXM9PnsNCiAgICAgICAgICAgICAgICAgICBpZihpZnRoZW4ocmVzKSkgew0KICAgICAgICAgICAgICAgICAgICAgJHN0b3JlLmNvbW1pdCgndXBEYXRlQWRtaW5JbmZvJywgcmVzLmRhdGEpDQogICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL0Rhc2hib2FyZCcpDQogICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgIC5jYXRjaCgoKT0+ew0KICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuZmFpbERpYWxvZ3MuZGlhbG9nPXRydWU7dGhpcy4kcmVmcy5mYWlsRGlhbG9ncy50ZXh0PSfojrflj5bkuKrkurrkv6Hmga/lpLHotKXor7fliLfmlrDpobXpnaInDQoNCiAgICAgICAgICAgICAgICAgfSkNCg0KDQogICAgICAgICB9DQogICAgICAgfQ0KICAgICAgfSkNCiAgICAgIC5jYXRjaCgoKT0+ew0KDQogICAgICAgIHRoaXMuaXNVcGRhdGluZz1mYWxzZQ0KICAgICAgICBhbGVydCgn55m75b2V5aSx6LSl77yM6K+35qOA5p+l572R57uc6L+e5o6lJykNCg0KICAgICAgfSkNCg0KDQoNCiAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Sign.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;AAIA;AACA;AACA","file":"Sign.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <v-card\r\n      color=\"blue-grey darken-1\"\r\n      dark\r\n      :loading=\"isUpdating\"\r\n      width=\"400\"\r\n      id=\"card\"\r\n  >\r\n    <template v-slot:progress>\r\n      <v-progress-linear\r\n          absolute\r\n          color=\"green lighten-3\"\r\n          height=\"4\"\r\n          indeterminate\r\n      ></v-progress-linear>\r\n    </template>\r\n    <v-img\r\n        height=\"300\"\r\n        src=\"../assets/dark-beach.jpg\"\r\n    >\r\n\r\n    </v-img>\r\n    <v-form>\r\n      <v-container id=\"text\">\r\n        <div style=\"width: 280px\">\r\n\r\n            <v-text-field\r\n                v-model=\"names\"\r\n                :disabled=\"isUpdating\"\r\n                class=\"text\"\r\n                filled\r\n                color=\"blue-grey lighten-2\"\r\n                label=\"用户名\"\r\n                @keyup.enter=\"submit()\"\r\n            ></v-text-field>\r\n        </div>\r\n        <div style=\"width: 280px\">\r\n\r\n            <v-text-field\r\n                v-model=\"pas\"\r\n                :disabled=\"isUpdating\"\r\n                filled\r\n                class=\"text\"\r\n                type=\"password\"\r\n                color=\"blue-grey lighten-2\"\r\n                label=\"密码\"\r\n                @keyup.enter=\"submit()\"\r\n            ></v-text-field>\r\n        </div>\r\n      </v-container>\r\n    </v-form>\r\n    <v-divider></v-divider>\r\n    <v-card-actions>\r\n\r\n      <v-spacer></v-spacer>\r\n      <v-btn\r\n          :loading=\"isUpdating\"\r\n          color=\"blue-grey darken-3\"\r\n          depressed\r\n          @click=\"submit()\"\r\n\r\n      >\r\n        <v-icon left>\r\n          mdi-update\r\n        </v-icon>\r\n        登录\r\n      </v-btn>\r\n    </v-card-actions>\r\n    <failDialogs  ref=\"failDialogs\"></failDialogs>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport {request} from \"../network/request\";\r\nimport VueCookies from 'vue-cookies'\r\nimport {getAdminInfo, getImage} from \"../network/adminApi\";\r\nimport $store from '../store'\r\nimport {ifthen} from \"../network/FN\";\r\nimport failDialogs from \"../components/HomeItem/failDialogs\";\r\n\r\n\r\nexport default {\r\nname: \"Sign\",\r\n  data(){\r\n    return{\r\n      pas: VueCookies.get('password')? VueCookies.get('password'):'',\r\n      names:  VueCookies.get('username')?VueCookies.get('username'):'',\r\n      // password: VueCookies.get('password'),\r\n      // username:VueCookies.get('username'),\r\n      isUpdating: false,\r\n    }\r\n  },\r\n  mounted() {\r\n\r\n    if(this.$store.state.Sing && this.names && this.pas){\r\n      setTimeout(()=>{\r\n        this.submit()\r\n      },1000)\r\n  }\r\n\r\n  },\r\n  components:{\r\n    failDialogs\r\n  },\r\n  methods:{\r\n  submit(){\r\n    this.$refs.failDialogs.dialog=true;\r\n    this.$refs.failDialogs.text='登录失败，请检查用户名密码或检查网络连接'\r\n    this.isUpdating=true\r\n    request({\r\n      url:'/admin/login',\r\n      method:'post',\r\n      data:{\r\n        \"password\": this.pas,\r\n        \"username\": this.names\r\n        // \"password\": '123456',\r\n        // \"username\": 'admin'\r\n      },\r\n\r\n     //\r\n    })\r\n     .then(res=>{\r\n        if(res.code===500){\r\n          this.isUpdating=false\r\n          alert('登录失败，请检查用户名密码或检查网络连接')\r\n\r\n        }\r\n       if(ifthen(res)) {\r\n         this.$store.commit(\"setToken\", res.data.token)\r\n         if (this.$store.state.token) {\r\n           alert('登录成功')\r\n           this.$store.commit('upDataSing')\r\n           VueCookies.set('username', this.names,{expires: 7})\r\n           VueCookies.set('password', this.pas,{expires: 7})\r\n           getImage(this.names)\r\n               .then((res) => {\r\n                   $store.commit('upDateAdminImage', res.data)\r\n                   $store.commit('upDateAdminUserName', this.names)\r\n                   }\r\n               ).catch()\r\n             getAdminInfo()\r\n                 .then(res=>{\r\n                   if(ifthen(res)) {\r\n                     $store.commit('upDateAdminInfo', res.data)\r\n                     this.$router.push('/Dashboard')\r\n                   }\r\n\r\n                 })\r\n                 .catch(()=>{\r\n                   this.$refs.failDialogs.dialog=true;this.$refs.failDialogs.text='获取个人信息失败请刷新页面'\r\n\r\n                 })\r\n\r\n\r\n         }\r\n       }\r\n      })\r\n      .catch(()=>{\r\n\r\n        this.isUpdating=false\r\n        alert('登录失败，请检查网络连接')\r\n\r\n      })\r\n\r\n\r\n\r\n  }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#card{\r\n  top: 100px;\r\n  margin: auto;\r\n  box-shadow: #c8c9cc 10px 10px 5px;\r\n}\r\n#text{\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n\r\n}\r\n\r\n</style>"]}]}