{"remainingRequest":"G:\\x\\vuetify_school\\node_modules\\babel-loader\\lib\\index.js!G:\\x\\vuetify_school\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\x\\vuetify_school\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\x\\vuetify_school\\src\\components\\avatarItem\\upDateImage.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\x\\vuetify_school\\src\\components\\avatarItem\\upDateImage.vue","mtime":1623497218070},{"path":"G:\\x\\vuetify_school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\x\\vuetify_school\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\x\\vuetify_school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\x\\vuetify_school\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgYWRkSW1hZ2UsIGdldEltYWdlIH0gZnJvbSAiLi4vLi4vbmV0d29yay9hZG1pbkFwaSI7CmltcG9ydCBmYWlsRGlhbG9ncyBmcm9tICIuLi9Ib21lSXRlbS9mYWlsRGlhbG9ncyI7CmltcG9ydCAkc3RvcmUgZnJvbSAnLi4vLi4vc3RvcmUnOwppbXBvcnQgeyBpZnRoZW4gfSBmcm9tICIuLi8uLi9uZXR3b3JrL0ZOIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbWFnZTogJHN0b3JlLnN0YXRlLmFkbWluSW1hZ2UsCiAgICAgIGlzVXBkYXRpbmc6IGZhbHNlLAogICAgICBtZW51OiBmYWxzZSwKICAgICAgZmlsZTogJycKICAgIH07CiAgfSwKICBwcm9wczogewogICAgdXNlcm5hbWU6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuaXNVcGRhdGluZyA9IHRydWU7CiAgICAgIGFkZEltYWdlKHRoaXMuZmlsZSwgdGhpcy4kc3RvcmUuc3RhdGUuYWRtaW5Vc2VyTmFtZSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKGlmdGhlbihyZXMpKSB7CiAgICAgICAgICBfdGhpcy4kcmVmcy5mYWlsRGlhbG9ncy5kaWFsb2cgPSB0cnVlOwogICAgICAgICAgX3RoaXMuJHJlZnMuZmFpbERpYWxvZ3MudGV4dCA9ICfkv67mlLnmiJDlip8nOwogICAgICAgICAgX3RoaXMubWVudSA9IGZhbHNlOwogICAgICAgICAgX3RoaXMuaXNVcGRhdGluZyA9IGZhbHNlOwogICAgICAgICAgX3RoaXMuZmlsZSA9ICcnOwogICAgICAgICAgZ2V0SW1hZ2UoX3RoaXMuJHN0b3JlLnN0YXRlLmFkbWluVXNlck5hbWUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBpZiAoaWZ0aGVuKHJlcykpIHsKICAgICAgICAgICAgICAkc3RvcmUuY29tbWl0KCd1cERhdGVBZG1pbkltYWdlJywgcmVzLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy4kcmVmcy5mYWlsRGlhbG9ncy5kaWFsb2cgPSB0cnVlOwogICAgICAgIF90aGlzLiRyZWZzLmZhaWxEaWFsb2dzLnRleHQgPSAn5L+u5pS55aSx6LSl6K+36YeN5paw5bCd6K+V5oiW5qOA5p+l572R57uc6L+e5o6lJzsKICAgICAgICBfdGhpcy5pc1VwZGF0aW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgZmFpbERpYWxvZ3M6IGZhaWxEaWFsb2dzCiAgfQp9Ow=="},{"version":3,"sources":["upDateImage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA,SAAA,QAAA,EAAA,QAAA,QAAA,wBAAA;AACA,OAAA,WAAA,MAAA,yBAAA;AACA,OAAA,MAAA,MAAA,aAAA;AACA,SAAA,MAAA,QAAA,kBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,KAAA,EAAA,MAAA,CAAA,KAAA,CAAA,UADA;AAEA,MAAA,UAAA,EAAA,KAFA;AAGA,MAAA,IAAA,EAAA,KAHA;AAIA,MAAA,IAAA,EAAA;AAJA,KAAA;AAAA,GADA;AAQA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AADA,GARA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AAAA;;AACA,WAAA,UAAA,GAAA,IAAA;AACA,MAAA,QAAA,CAAA,KAAA,IAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA,aAAA,CAAA,CACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,YAAA,MAAA,CAAA,GAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,WAAA,CAAA,MAAA,GAAA,IAAA;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,WAAA,CAAA,IAAA,GAAA,MAAA;AACA,UAAA,KAAA,CAAA,IAAA,GAAA,KAAA;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,KAAA;AACA,UAAA,KAAA,CAAA,IAAA,GAAA,EAAA;AACA,UAAA,QAAA,CAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,aAAA,CAAA,CACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,gBAAA,MAAA,CAAA,GAAA,CAAA,EAAA;AACA,cAAA,MAAA,CAAA,MAAA,CAAA,kBAAA,EAAA,GAAA,CAAA,IAAA;AACA;AACA,WALA;AAMA;AACA,OAfA,EAgBA,KAhBA,CAgBA,YAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,WAAA,CAAA,MAAA,GAAA,IAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,WAAA,CAAA,IAAA,GAAA,kBAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,KAAA;AACA,OApBA;AAwBA;AA3BA,GAbA;AA0CA,EAAA,UAAA,EAAA;AACA,IAAA,WAAA,EAAA;AADA;AA1CA,CAAA","sourcesContent":["<template>\r\n  <div class=\"text-center\">\r\n\r\n    <v-menu\r\n        v-model=\"menu\"\r\n        :close-on-content-click=\"false\"\r\n        :nudge-width=\"200\"\r\n        offset-x\r\n    >\r\n\r\n      <template v-slot:activator=\"{ on, attrs }\">\r\n\r\n\r\n        <v-list-item\r\n            v-bind=\"attrs\"\r\n            v-on=\"on\">\r\n          <v-list-item-action>\r\n            <v-icon>mdi-cog</v-icon>\r\n          </v-list-item-action>\r\n          <v-list-item-content>\r\n            <v-list-item-title>更改头像</v-list-item-title>\r\n          </v-list-item-content>\r\n        </v-list-item>\r\n\r\n      </template>\r\n\r\n      <v-card\r\n          :loading=\"isUpdating\"\r\n      >\r\n        <v-list>\r\n          <v-list-item>\r\n            <v-list-item-avatar>\r\n              <img\r\n                  :src=\"image\"\r\n                  alt=\"无图片\"\r\n\r\n              >\r\n            </v-list-item-avatar>\r\n            <h3>{{username}}</h3>\r\n            <failDialogs ref=\"failDialogs\"></failDialogs>\r\n\r\n          </v-list-item>\r\n          <template>\r\n            <v-file-input\r\n                accept=\"image/*\"\r\n                label=\"点击上传头像\"\r\n                v-model=\"file\"\r\n            ></v-file-input>\r\n          </template>\r\n\r\n        </v-list>\r\n        <v-divider></v-divider>\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n\r\n          <v-btn\r\n              text\r\n              @click=\"menu = false\"\r\n          >\r\n            取消\r\n          </v-btn>\r\n          <v-btn\r\n              color=\"primary\"\r\n              text\r\n              @click=\"submit()\"\r\n\r\n          >\r\n            确认修改\r\n          </v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-menu>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {addImage, getImage} from \"../../network/adminApi\";\r\nimport failDialogs from \"../HomeItem/failDialogs\";\r\nimport $store from '../../store'\r\nimport {ifthen} from \"../../network/FN\";\r\nexport default {\r\n  data: () => ({\r\n    image:$store.state.adminImage,\r\n    isUpdating:false,\r\n    menu: false,\r\n    file:''\r\n\r\n  }),\r\n  props:{\r\n    username: {\r\n      type:String\r\n    }\r\n  },\r\n  methods:{\r\n    submit(){\r\n      this.isUpdating=true\r\n      addImage(this.file,this.$store.state.adminUserName)\r\n      .then((res)=>{\r\n        if(ifthen(res)) {\r\n          this.$refs.failDialogs.dialog = true;\r\n          this.$refs.failDialogs.text = '修改成功'\r\n          this.menu = false\r\n          this.isUpdating = false\r\n          this.file = ''\r\n          getImage(this.$store.state.adminUserName)\r\n              .then((res) => {\r\n                if(ifthen(res)) {\r\n                  $store.commit('upDateAdminImage', res.data)\r\n                }\r\n              })\r\n        }\r\n          })\r\n          .catch(()=>{\r\n            this.$refs.failDialogs.dialog=true;\r\n            this.$refs.failDialogs.text='修改失败请重新尝试或检查网络连接'\r\n            this.isUpdating=false\r\n          })\r\n\r\n\r\n\r\n    }\r\n  },\r\n  components:{\r\n    failDialogs\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"sourceRoot":"src/components/avatarItem"}]}